---
title: Shocks
author: Vivian Nguyen
date: '2022-10-24'
slug: []
categories: []
tags: []
---

This is blog post #7 in a series of analytical posts in lieu of the 2022 midterms. This post is affiliated with Gov 1347: Election Analytics, a course at Harvard University in the department of Government.

---
```{r setup, include = FALSE, message = FALSE}
# Set up
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(readr)
library(stargazer)
library(usmap)
library(rmapshaper)
library(sf)
library(insight)
library(scales)

```

# The Plan This Week
Discuss previous weeks’ work. Then, introduce shocks. Consider adding shocks to the model. Update the district-level model (pooled? Or not)

# Other Subtitle

# My 2022 Model and Forecast, Updated
-Update national model? Maybe averaged (very) expert prediction + ratio of ads for each party  
-Def update district-level model, pooling the IVs of similar districts to get all 435 predictions out of the model

## New Model
```{r district models with ALL districts + expert preds - turnout, include = FALSE}
# expert_ratings$district <- as.numeric(expert_ratings$district)
# # df$district_num <- as.numeric(df$district_num)
# # df <- df %>%
# #   rename(district = district_num)
# 
# district_data <- expert_ratings %>% 
#   filter(year != 2022) 
# 
# newdf <- left_join(df, expert_ratings, by = c("year", "state", "district"))
# 
# newdff <- df %>% 
#     full_join(expert_ratings %>% filter(year < 2022 & year > 2010), by = c("year", "state", "district")) #%>%
#     #mutate_if(is.numeric, function(x) replace_na(x, 3.5))
# 
# sum(is.na(newdff$avg_rating))
# 
# newdff$avg_rating[is.na(newdff$avg_rating)] <- mean(newdff$avg_rating, na.rm = TRUE)
# 
# newdf <- drop_na(newdf)
# 
# sds = unique(house_cands_22$st_cd_fips)
# models <- list()
# r2 <- c()
# preds <- c()
# for (sd in sds){
#   # Filter for dataframe with just district sd
#   temp <- newdff %>%
#     filter(st_cd_fips == sd)
#   
#   # Fit linear model for dem two-party vote-share
#   if (nrow(temp) > 0)
#   {
#     m <- lm(DemVotesMajorPercent ~ average_support + incumb + avg_rating, data = temp)
#     models[[length(models)+1]] <- m
#   
#   # Find r^2 and add to list of r^squareds
#     r2 <- c(r2, summary(m)$adj.r.squared)
#   }
# 
#     
#   
#   # Make a 2022 prediction and append to list
#   # new_data <- turnout22 %>%
#   #   filter(st_cd_fips == sd) %>%
#   #   rename(turnout = historical_turnout_by_district)
#   # preds <- c(preds, predict(m, new_data))
# }
# 
# hist(r2, breaks = 50)
# mean(r2, na.rm = TRUE)

```

## New Forecast
Include confidence intervals for predictions !! 

---
**References**

[1] Kalla, & Broockman, D. E. (2018). The Minimal Persuasive Effects of Campaign Contact in General Elections: Evidence from 49 Field Experiments. The American Political Science Review, 112(1), 148–166. https://doi.org/10.1017/S0003055417000363

[2] Ball, M. (2012, October 25). Obama's edge: The ground game that could put him over the top. The Atlantic. https://www.theatlantic.com/politics/archive/2012/10/obamas-edge-the-ground-game-that-could-put-him-over-the-top/264031/) 

[3] Enos, & Fowler, A. (2018). Aggregate Effects of Large-Scale Campaigns on Voter Turnout. Political Science Research and Methods, 6(4), 733–751. https://doi.org/10.1017/psrm.2016.21

[4] Masket, Seth E. (2009). Did Obama’s Ground Game Matter? The Influence of Local Field Offices During the 2008 Presidential Election, Public Opinion Quarterly, 73(5), 1023–1039. https://doi.org/10.1093/poq/nfp077

[5] Darr, & Levendusky, M. S. (2014). Relying on the Ground Game. American Politics Research, 42(3), 529–548. https://doi.org/10.1177/1532673X13500520
